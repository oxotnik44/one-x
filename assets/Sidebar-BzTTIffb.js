import{r as u,j as e,c as b,u as w}from"./iframe-C0kfoYRU.js";import{g as N,h as y,d as k}from"./index-DJP2UdXn.js";import{u as g}from"./sidebarStore-DngkkDiT.js";import{c as d}from"./classNames-CSVCBH4b.js";import{B as p,a as h}from"./Button-BG29j6-m.js";import{u as C,N as S}from"./ButtonNavigation-AGHQnJJF.js";import{D as L}from"./Dropdown-B0nLrr0u.js";import"./FilePicker-BOxeBJkN.js";import{a as F,c as O}from"./AutoHideScroll-Bn4kiatZ.js";import"./Input-Syt8WR94.js";import"./Like-CU83MUjH.js";import"./Loader-BA1QRYy5.js";import"./index-CCh5LiNu.js";import"./PageLoader-CjR7aYj7.js";import"./PageWrapper-CUwEEPPt.js";import{T as j}from"./Text-Cv_jbED3.js";import"./TrackControlButton-Cp9njBny.js";import{U as z,a as E}from"./UserAvatar-D3VV5S8d.js";import{F as M,a as B}from"./Modal-ot01iIn6.js";import{u as v}from"./useTranslation-DTQxaVaH.js";const T=[{icon:N,label:"search",href:"search"},{icon:y,label:"main",href:"main"},{icon:k,label:"myGroup",href:"my_group"}],G=()=>{const{t:s}=v("profileMenu"),{isOpen:t,toggle:o,close:n}=P(),{isCollapsed:i}=g(),m=F(r=>r.currentGroup),a=O(r=>r.logout),l=u.useRef(null),x=C();u.useEffect(()=>{if(!t)return;const r=f=>{l.current?.contains(f.target)||n()};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[t,n]);const c=(r,f)=>{x(r),f?.(),n()};return e.jsxs("div",{ref:l,className:"relative inline-block",children:[e.jsxs("div",{onClick:o,className:"flex items-center cursor-pointer gap-3",children:[e.jsx(z,{src:m?.cover??E}),!i&&e.jsx(j,{text:m?.name||s("user"),size:"small",className:"font-semibold"})]}),e.jsx(L,{isOpen:t,onClose:n,className:i?"bottom-15 left-2":"bottom-20 left-10",style:i?{backgroundColor:"transparent",boxShadow:"none"}:void 0,children:i?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(p,{onClick:()=>c("/settings"),size:h.L,square:!0,children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx(p,{onClick:()=>c("/",a),size:h.L,square:!0,children:e.jsx(B,{className:"w-5 h-5"})})]}):e.jsxs("ul",{className:"flex flex-col min-w-[160px] gap-2",children:[e.jsx("li",{children:e.jsx(p,{onClick:()=>c("/settings"),className:"w-full text-left px-4 py-2 rounded hover:bg-gray-100 transition-colors",children:s("settings")})}),e.jsx("li",{children:e.jsx(p,{onClick:()=>c("/",a),className:"w-full text-left px-4 py-2 rounded hover:bg-red-100 text-red-600 transition-colors",children:s("logout")})})]})})]})},P=b((s,t)=>({isOpen:!1,open:()=>s({isOpen:!0}),close:()=>s({isOpen:!1}),toggle:()=>s({isOpen:!t().isOpen})})),R=u.memo(()=>{const{t:s}=v("sidebar"),t=w(a=>a.theme),{isCollapsed:o,toggleCollapsed:n,setSelectedItem:i}=g(),m=a=>a?t["--primary-color"]:t["--second-color"];return e.jsxs("aside",{className:d("fixed left-2 top-2 h-[calc(100vh-1rem)] flex flex-col p-2 rounded-3xl shadow-xl transition-all duration-300",o?"w-20":"w-64"),style:{backgroundColor:t["--bg-container"]},children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("img",{src:"/assets/Logo.webp",alt:s("logoAlt"),className:d("object-contain transition-all duration-300 rounded-xl",o?"w-15 h-15":"w-40 h-40")})}),e.jsx("nav",{className:"flex flex-col gap-5 mt-10 flex-grow",children:T.map(({icon:a,label:l,href:x})=>e.jsx(S,{to:x,className:()=>d("flex items-center px-2 py-1 rounded gap-3 cursor-pointer transition",o&&"justify-center"),onClick:()=>i(l),children:({isActive:c})=>{const r=m(c);return e.jsxs(e.Fragment,{children:[e.jsx(a,{size:o?20:24,style:{color:r}}),!o&&e.jsx(j,{text:s(l),size:"default"})]})}},l))}),e.jsxs("div",{className:"flex items-center justify-between gap-3 mt-8",children:[e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"w-8 h-8 bg-gray-500 rounded-full animate-pulse"}),children:e.jsx(G,{})}),e.jsx("div",{onClick:n,className:"group relative cursor-pointer p-1 rounded hover:bg-gray-600 transition","aria-label":s(o?"expand":"collapse"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:d("w-6 h-6 transition-opacity duration-300",o?"opacity-0 group-hover:opacity-100":"opacity-100"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:o?"M9 5l7 7-7 7":"M15 19l-7-7 7-7"})})})]})]})});R.displayName="Sidebar";export{G as P,R as S};
