import{V as u,b as s}from"./api-BNB6Hzxt.js";import{u as n}from"./index-DSF9hKFK.js";import{c}from"./iframe-U8ya4lKj.js";const T=async e=>{const{authData:o,toggleLikeTrack:r}=n.getState();if(!o){u.error("Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð»Ð°Ð¹ÐºÐ°Ñ‚ÑŒ");return}const a=o.likedTracks??[],i=a.includes(e)?a.filter(t=>t!==e):[...a,e];try{const{data:t}=await s.patch(`/users/${o.id}`,{likedTracks:i});r(t.likedTracks??i),u.success(a.includes(e)?"ðŸ’” Ð£Ð±Ñ€Ð°Ð½Ð¾ Ð¸Ð· Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾":"â¤ï¸ Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð² Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ")}catch{u.error("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð»Ð°Ð¹Ðº")}},f=e=>{const o=Math.floor(e/60),r=Math.floor(e%60);return`${o}:${r.toString().padStart(2,"0")}`},p=c((e,o)=>({currentTrack:null,progress:0,currentTime:0,isPlaying:!1,duration:0,volume:1,isMuted:!1,audio:null,setCurrentTrack:r=>{const a=o();a.audio&&(a.audio.pause(),a.audio.src="");const i=new Audio(r.audioUrl);i.volume=a.isMuted?0:a.volume,i.addEventListener("loadedmetadata",()=>{e({duration:i.duration})}),i.addEventListener("timeupdate",()=>{e({progress:i.currentTime/i.duration*100,currentTime:i.currentTime})}),i.play().catch(()=>{console.warn("ÐÐ²Ñ‚Ð¾Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ñ€ÐµÑ‰ÐµÐ½Ð¾ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð¾Ð¼")}),e({currentTrack:r,progress:0,currentTime:0,isPlaying:!0,duration:0,audio:i})},setProgress:r=>{const a=o().audio;a&&(a.currentTime=r/100*a.duration),e({progress:r})},setCurrentTime:r=>e({currentTime:r}),setIsPlaying:r=>{const a=o().audio;a&&(r?a.play().catch(i=>{console.warn("ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð°ÑƒÐ´Ð¸Ð¾:",i)}):a.pause(),e({isPlaying:r}))},setDuration:r=>e({duration:r}),setVolume:r=>{const a=o().audio;a&&(a.volume=r),e({volume:r})},setIsMuted:r=>{const a=o().audio;a&&(a.volume=r?0:o().volume),e({isMuted:r})},togglePlay:()=>{const{isPlaying:r,setIsPlaying:a}=o();a(!r)},resetPlayer:()=>{const r=o().audio;r&&r.pause(),e({currentTrack:null,progress:0,currentTime:0,isPlaying:!1,duration:0,audio:null})}}));export{f,T as l,p as u};
