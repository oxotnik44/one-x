import{r as f,j as e,c as C,R as y,u as S}from"./iframe-Bt4UvEqW.js";import{g as L,h as O,d as z}from"./index-i_s2-YOI.js";import{u as v}from"./sidebarStore-irYbJWnv.js";import{B as p,a as j}from"./Button-40eEdaHr.js";import{u as b,d as F}from"./ButtonNavigation-DuwpFPZD.js";import{D as E}from"./Dropdown-D_2yar06.js";import"./FilePicker-D62rdBOg.js";import{a as M,u as R}from"./index-BlSK3dwA.js";import"./Input-Bygz4nLz.js";import"./Like-DXxARhTn.js";import"./Loader-ld3rHLDK.js";import"./index-DfYkHRSD.js";import{c as x}from"./classNames-DZENv8ZT.js";import"./PageLoader-HUM1dPua.js";import"./PageWrapper-Nh9y5AVa.js";import"./ConfirmDeleteModal-BXHaXOST.js";import{T as w}from"./Text-IhfjRFJQ.js";import"./TrackControlButton-DKEqXBy9.js";import{U as T,a as B}from"./UserAvatar-B3tKy1se.js";import{F as G,a as A}from"./Modal-B9i_GAWK.js";import{u as N}from"./useTranslation-D6XLV_9q.js";const I=[{icon:L,label:"search",href:"search"},{icon:O,label:"main",href:"main"},{icon:z,label:"myGroup",href:"my_group"}],P=()=>{const{t:s}=N("profileMenu"),i=b(),{isOpen:o,close:r,toggle:c}=U(),h=M(t=>t.logout),{isCollapsed:n}=v(),m=R(t=>t.currentGroup),l=f.useRef(null);f.useEffect(()=>{if(!o)return;const t=u=>{l.current&&!l.current.contains(u.target)&&r()};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[o,r]);const d=()=>{i("/settings"),r()},a=()=>{h(),r()};return e.jsxs("div",{ref:l,className:"relative inline-block",children:[e.jsxs("div",{onClick:c,className:"flex items-center cursor-pointer gap-3",children:[e.jsx(T,{src:m?.cover??B}),!n&&e.jsx(w,{text:m?.name||s("user"),size:"small",className:"font-semibold",isLink:!1})]}),e.jsx(E,{isOpen:o,onClose:r,className:n?"bottom-15 left-2":"bottom-20 left-10",style:n?{backgroundColor:"transparent",boxShadow:"none"}:void 0,children:n?e.jsxs("div",{className:"flex flex-col gap-y-2 ",children:[e.jsx(p,{onClick:d,size:j.L,square:!0,"aria-label":"Settings",children:e.jsx(G,{className:"w-5 h-5"})}),e.jsx(p,{onClick:a,size:j.L,square:!0,"aria-label":"Logout",children:e.jsx(A,{})})]}):e.jsxs("ul",{className:"flex flex-col min-w-[160px] gap-y-2",children:[e.jsx("li",{children:e.jsx(p,{onClick:d,className:"w-full text-left px-4 py-2 rounded hover:bg-gray-100 transition-colors",children:s("settings")})}),e.jsx("li",{children:e.jsx(p,{onClick:a,className:"w-full text-left px-4 py-2 rounded hover:bg-red-100 text-red-600 transition-colors",children:s("logout")})})]})})]})},U=C((s,i)=>({isOpen:!1,open:()=>s({isOpen:!0}),close:()=>s({isOpen:!1}),toggle:()=>s({isOpen:!i().isOpen})})),q=y.memo(()=>{const{t:s}=N("sidebar"),i=S(a=>a.theme),{isCollapsed:o,toggleCollapsed:r,setSelectedItem:c}=v(),h=F(),n=b(),m=h.pathname.replace(/^\/+/,""),l=f.useCallback((a,t)=>{c(a),n(t)},[c,n]),d=f.useCallback(()=>{r()},[r]);return e.jsxs("aside",{className:x("fixed left-2 top-2 h-[calc(100vh-1rem)] text-white flex flex-col p-2 rounded-3xl shadow-xl transition-all duration-300",o?"w-20":"w-64"),style:{backgroundColor:i["--bg-container"]},children:[e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("img",{src:"/assets/Logo.webp",alt:s("logoAlt"),className:x("object-contain transition-all duration-300 rounded-xl",o?"w-15 h-15":"w-40 h-40")})}),e.jsx("nav",{className:"flex flex-col gap-5 mt-10",children:I.map(({icon:a,label:t,href:u})=>{const g=m.startsWith(u),k=g?i["--primary-color"]:i["--second-color"];return e.jsxs("div",{onClick:()=>l(t,u),className:x("flex items-center cursor-pointer px-2 py-1 rounded hover:text-white transition gap-3",o&&"justify-center"),style:{color:k},children:[e.jsx(a,{size:o?20:24}),!o&&e.jsx(w,{text:s(t),size:"default",isActive:g,isLink:!1})]},t)})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 mt-8",children:[e.jsx(P,{}),e.jsx("div",{className:"group relative",children:e.jsx("div",{onClick:d,className:"cursor-pointer p-1 rounded hover:bg-gray-600 transition","aria-label":s(o?"expand":"collapse"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:x("h-6 w-6 transition-opacity duration-300",o?"opacity-0 group-hover:opacity-100":"opacity-100"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:o?"M9 5l7 7-7 7":"M15 19l-7-7 7-7"})})})})]})]})});q.displayName="Sidebar";export{P,q as S};
